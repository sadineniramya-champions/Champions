<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Athlete Dashboard">
    <meta name="theme-color" content="#1e293b">
    <link rel="manifest" href="manifest.json">
    <title>Athlete Training Dashboard</title>

```
<script src="https://cdn.tailwindcss.com"></script>

<style>
    * { box-sizing: border-box; }
    body { 
        margin: 0;
        padding: 0;
        overscroll-behavior-y: contain;
        -webkit-overflow-scrolling: touch;
    }
    button {
        -webkit-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
    }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
</style>
```

</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
    <div id="root" class="min-h-screen p-4">
        <div class="text-white text-center py-20">
            <div class="text-6xl mb-4">‚ö°</div>
            <h1 class="text-2xl font-bold">Loading Athlete Dashboard...</h1>
        </div>
    </div>

```
<script>
    // Exercise emojis - ALL from your original
    const exerciseEmojis = {
        'H Skip':'üèÉ‚Äç‚ôÇÔ∏è','Back Kicking':'ü§∏‚Äç‚ôÇÔ∏è','A Skip':'üèÉ‚Äç‚ôÄÔ∏è','B Skip':'ü§æ‚Äç‚ôÇÔ∏è','C Skip':'ü§æ‚Äç‚ôÄÔ∏è',
        'Small Jumps':'ü§∏‚Äç‚ôÄÔ∏è','Leg Raisings':'üßò‚Äç‚ôÇÔ∏è','Chest Jumps':'ü§æ','Thigh Jumps':'üèÉ',
        'Pogo Jumps':'‚õπÔ∏è‚Äç‚ôÇÔ∏è','Hanuman Jumps':'ü§∏','Split Jumps':'ü§∫','Single Leg Hopings':'üï∫',
        'Hop Hop Bound':'üíÉ','Duck Walk':'üßé‚Äç‚ôÇÔ∏è','Stretch Walk':'üö∂‚Äç‚ôÇÔ∏è','Frog Jumps':'ü§∏‚Äç‚ôÄÔ∏è',
        'Crocodile Crawling':'üßó‚Äç‚ôÇÔ∏è','Hand Walk':'ü§∏‚Äç‚ôÇÔ∏è','Gunny Bag Run':'üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è','High Knee':'üèÉ‚Äç‚ôÄÔ∏è',
        'Back High Knee':'üèÉ‚Äç‚ôÇÔ∏è','Back Run':'üö∂‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è','Boundings':'ü§æ','Front Kick':'ü•ã',
        'Shapings':'üèÉ‚Äç‚ôÇÔ∏è','Shuffle Run':'ü§∏','2K Run - Time Trial':'üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è','2K Run - Easy Pace':'üö∂‚Äç‚ôÇÔ∏è',
        '2K Run - Tempo':'üèÉ‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è','2K Run - Interval Training':'üèÉ','Good Morning':'üßò‚Äç‚ôÇÔ∏è',
        'Hamstring Stretch':'üßò‚Äç‚ôÄÔ∏è','Clean and Jerk':'üèãÔ∏è‚Äç‚ôÇÔ∏è','Snatch':'üèãÔ∏è‚Äç‚ôÄÔ∏è','Clean Snatch':'üèãÔ∏è‚Äç‚ôÄÔ∏è',
        'Power Cleans':'üèãÔ∏è','Step Up':'üö∂‚Äç‚ôÇÔ∏è','Step Ups':'üö∂‚Äç‚ôÄÔ∏è','Lunging':'ü§∫','Lungings':'ü§∫',
        'Half Squads':'üèãÔ∏è‚Äç‚ôÇÔ∏è','Push Press':'üèãÔ∏è‚Äç‚ôÄÔ∏è','Plate Action':'üèãÔ∏è','Jumping Squads':'ü§æ‚Äç‚ôÇÔ∏è',
        'Arm Action':'ü§∏‚Äç‚ôÇÔ∏è','Bench Press':'üèãÔ∏è‚Äç‚ôÇÔ∏è','Shoulder Press':'üèãÔ∏è‚Äç‚ôÄÔ∏è','Plate Exercises':'üèãÔ∏è',
        'Full Squad':'üßé‚Äç‚ôÄÔ∏è','Lat Pulldown':'üßó‚Äç‚ôÇÔ∏è','Cable Chest Fly':'üèãÔ∏è‚Äç‚ôÄÔ∏è','Leg Press':'üèãÔ∏è‚Äç‚ôÇÔ∏è',
        'Leg Extension':'üßò‚Äç‚ôÇÔ∏è','Leg Curl':'üßò‚Äç‚ôÄÔ∏è','Cable Row':'üö£‚Äç‚ôÇÔ∏è','Tricep Pushdown':'üèãÔ∏è',
        'Cable Crossover':'üèãÔ∏è‚Äç‚ôÄÔ∏è','Box Jumps':'ü§æ','Medicine Ball Throw - Back Throw':'ü§æ‚Äç‚ôÇÔ∏è',
        'Medicine Ball Throw - Front Throw':'ü§æ‚Äç‚ôÄÔ∏è','Medicine Ball Throw - Side Throw':'ü§∏‚Äç‚ôÇÔ∏è',
        'Medicine Ball Throw - Jump Throw':'‚õπÔ∏è‚Äç‚ôÇÔ∏è','Medicine Ball Throw - Sitting Throw':'üßò',
        'Medicine Ball Throw - Front Power Throw':'‚õπÔ∏è‚Äç‚ôÄÔ∏è','Medicine Ball Throw - Stretch Throw':'ü§∏‚Äç‚ôÄÔ∏è',
        'Hurdle Hops':'ü§æ‚Äç‚ôÇÔ∏è','Lateral Hurdle Jumps':'ü§∏‚Äç‚ôÄÔ∏è','Hurdle Walks':'üö∂‚Äç‚ôÇÔ∏è',
        'Trail Leg Drills':'üèÉ‚Äç‚ôÇÔ∏è','Lead Leg Drills':'üèÉ‚Äç‚ôÄÔ∏è','Hurdle Step Overs':'üö∂‚Äç‚ôÄÔ∏è',
        'Warm Up - Dynamic Stretching, Stridings':'üßò‚Äç‚ôÇÔ∏è','80 Meters x 6':'üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è','60 Meters x 4':'üèÉ‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è',
        'Wall High Knee':'üèÉ‚Äç‚ôÇÔ∏è','Wall Jumps':'ü§æ','1 Leg Hoppings':'ü§æ‚Äç‚ôÇÔ∏è','Squat Jump 1 Step':'ü§∏‚Äç‚ôÇÔ∏è',
        'Squat Jump 2 Steps':'ü§∏‚Äç‚ôÄÔ∏è','Sand Sprints':'üèÉ‚Äç‚ôÇÔ∏è','Sand Bounds':'ü§æ','Sand Hill Runs':'üèÉ‚Äç‚ôÄÔ∏è‚Äç‚û°Ô∏è',
        'Sand Agility Drills':'ü§∏','Sand High Knees':'üèÉ‚Äç‚ôÇÔ∏è','Wall High Knees':'üèÉ‚Äç‚ôÇÔ∏è',
        'Wall Sprints':'üèÉ‚Äç‚ôÄÔ∏è','Wall Drives':'üèÉ','Wall Push Offs':'ü§∏‚Äç‚ôÇÔ∏è','Box Step Ups':'üö∂‚Äç‚ôÇÔ∏è',
        'Weighted Step Ups':'üèãÔ∏è‚Äç‚ôÇÔ∏è','Alternating Step Ups':'üö∂‚Äç‚ôÄÔ∏è','Explosive Step Ups':'ü§æ',
        'Plank':'üßò‚Äç‚ôÄÔ∏è','Side Plank':'üßò‚Äç‚ôÇÔ∏è','Russian Twists':'üßò','Bicycle Crunches':'üö¥‚Äç‚ôÇÔ∏è',
        'Leg Raises':'üßò‚Äç‚ôÄÔ∏è','Dead Bug':'üßò‚Äç‚ôÇÔ∏è','Mountain Climbers':'üßó‚Äç‚ôÇÔ∏è','Ab Wheel':'üßó‚Äç‚ôÄÔ∏è',
        'Hollow Hold':'üßò','Hamstring':'üßò‚Äç‚ôÇÔ∏è','Quad Stretch':'üßò‚Äç‚ôÄÔ∏è','Hip Flexor':'üßò',
        'Calf Stretch':'üßò‚Äç‚ôÇÔ∏è','IT Band':'üßò‚Äç‚ôÄÔ∏è','Glute Stretch':'üßò','Lower Back':'üßò‚Äç‚ôÇÔ∏è',
        'Upper Back':'üßò‚Äç‚ôÄÔ∏è','Shoulder Stretch':'üßò','Chest Stretch':'üßò‚Äç‚ôÇÔ∏è','Jogging':'üèÉ‚Äç‚ôÄÔ∏è',
        'Walking':'üö∂','Light Stretching':'üßò‚Äç‚ôÇÔ∏è','Dynamic Stretching':'ü§∏‚Äç‚ôÇÔ∏è','Light Jog':'üèÉ‚Äç‚ôÇÔ∏è',
        'Arm Circles':'ü§∏‚Äç‚ôÄÔ∏è','Leg Swings':'ü§∏','Hip Openers':'üßò‚Äç‚ôÄÔ∏è','Stridings':'üèÉ‚Äç‚ôÄÔ∏è',
        'Foam Rolling':'üßò‚Äç‚ôÇÔ∏è','Static Stretching':'üßò‚Äç‚ôÄÔ∏è','Light Walk':'üö∂‚Äç‚ôÇÔ∏è','Easy Jog':'üèÉ‚Äç‚ôÄÔ∏è',
        'Mobility Work':'ü§∏‚Äç‚ôÇÔ∏è','Cool Down':'üßò','Deep Breathing':'üßò‚Äç‚ôÇÔ∏è','Recovery Stretching':'üßò‚Äç‚ôÄÔ∏è',
        'Core':'üßò','Zig Zag Drills':'üèÉ‚Äç‚ôÇÔ∏è','Figure 8 Drills':'üèÉ‚Äç‚ôÄÔ∏è','T-Drill':'ü§æ‚Äç‚ôÇÔ∏è',
        'L-Drill':'ü§æ‚Äç‚ôÄÔ∏è','Box Drill':'üèÉ','5-10-5 Shuttle':'ü§∏‚Äç‚ôÇÔ∏è','Push Ups':'ü§∏‚Äç‚ôÄÔ∏è',
        'Burpees':'ü§æ','Jump Squats':'ü§∏‚Äç‚ôÇÔ∏è','Jumping Jacks':'ü§∏','Lunges':'üèãÔ∏è',
        'Cone Drills':'üèÉ‚Äç‚ôÇÔ∏è','Circuit Training':'üîÑ'
    };
    
    // Exercise categories - ALL 18 from your original
    const categories = {
        'ABC Drills': [
            {name:'H Skip',sets:'3',reps:'',weight:'',duration:'',notes:'30 meters distance'},
            {name:'Back Kicking',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'A Skip',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'B Skip',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'C Skip',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Small Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Leg Raisings',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Chest Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Thigh Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Pogo Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Hanuman Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Split Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Single Leg Hopings',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Hop Hop Bound',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Duck Walk',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Stretch Walk',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Frog Jumps',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Crocodile Crawling',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Hand Walk',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Gunny Bag Run',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'High Knee',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Back High Knee',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Back Run',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Boundings',sets:'3',reps:'',weight:'',duration:'',notes:'50 meters'},
            {name:'Front Kick',sets:'3',reps:'',weight:'',duration:'',notes:'50 meters'},
            {name:'Shapings',sets:'3',reps:'',weight:'',duration:'',notes:'50 meters'},
            {name:'Shuffle Run',sets:'3',reps:'',weight:'',duration:'',notes:''}
        ],
        'Cross Country 2K Run': [
            {name:'2K Run - Time Trial',sets:'1',reps:'',weight:'',duration:'',notes:''},
            {name:'2K Run - Easy Pace',sets:'1',reps:'',weight:'',duration:'',notes:''},
            {name:'2K Run - Tempo',sets:'1',reps:'',weight:'',duration:'',notes:''},
            {name:'2K Run - Interval Training',sets:'1',reps:'',weight:'',duration:'',notes:''}
        ],
        'Heavy Weights': [
            {name:'Good Morning',sets:'3',reps:'',weight:'20',duration:'',notes:''},
            {name:'Hamstring Stretch',sets:'3',reps:'',weight:'20',duration:'',notes:''},
            {name:'Clean and Jerk',sets:'12',reps:'',weight:'35',duration:'',notes:'6+4+2 sets'},
            {name:'Clean Snatch',sets:'12',reps:'',weight:'25',duration:'',notes:'6+4+2 sets'},
            {name:'Power Cleans',sets:'14',reps:'',weight:'35',duration:'',notes:'8+4+2 sets'},
            {name:'Step Ups',sets:'3',reps:'65',weight:'30',duration:'',notes:'20+20+25 reps'},
            {name:'Lungings',sets:'3',reps:'40',weight:'20',duration:'',notes:'40 reps each'},
            {name:'Half Squads',sets:'3',reps:'24',weight:'60',duration:'',notes:'10+8+6, weight: 50+60+70kg'},
            {name:'High Knee',sets:'3',reps:'',weight:'20',duration:'30',notes:'30 sec each'},
            {name:'Push Press',sets:'3',reps:'20',weight:'20',duration:'',notes:''},
            {name:'Stretch Walk',sets:'3',reps:'',weight:'30',duration:'',notes:'30 meters'},
            {name:'Plate Action',sets:'3',reps:'',weight:'2.5',duration:'',notes:'30 meters'},
            {name:'Jumping Squads',sets:'3',reps:'16',weight:'20',duration:'',notes:''},
            {name:'Arm Action',sets:'3',reps:'',weight:'',duration:'30',notes:'Double 30 sec'},
            {name:'Bench Press',sets:'3',reps:'24',weight:'30',duration:'',notes:'10+8+6 reps'}
        ],
        'Light Weights': [
            {name:'Good Morning',sets:'3',reps:'',weight:'20',duration:'',notes:''},
            {name:'Hamstring Stretch',sets:'3',reps:'',weight:'20',duration:'',notes:''},
            {name:'Clean and Jerk',sets:'12',reps:'',weight:'35',duration:'',notes:'6+4+2 sets'},
            {name:'Clean Snatch',sets:'12',reps:'',weight:'25',duration:'',notes:'6+4+2 sets'},
            {name:'Power Cleans',sets:'14',reps:'',weight:'35',duration:'',notes:'8+4+2 sets'},
            {name:'Step Ups',sets:'3',reps:'65',weight:'30',duration:'',notes:'20+20+25 reps'},
            {name:'Lungings',sets:'3',reps:'40',weight:'20',duration:'',notes:''},
            {name:'Half Squads',sets:'3',reps:'24',weight:'60',duration:'',notes:'10+8+6 reps'},
            {name:'High Knee',sets:'3',reps:'',weight:'20',duration:'30',notes:'30 sec each'},
            {name:'Push Press',sets:'3',reps:'20',weight:'20',duration:'',notes:''},
            {name:'Stretch Walk',sets:'3',reps:'',weight:'30',duration:'',notes:'30 meters'},
            {name:'Plate Action',sets:'3',reps:'',weight:'2.5',duration:'',notes:'30 meters'},
            {name:'Jumping Squads',sets:'3',reps:'16',weight:'20',duration:'',notes:''},
            {name:'Arm Action',sets:'3',reps:'',weight:'',duration:'30',notes:'Double 30 sec'},
            {name:'Bench Press',sets:'3',reps:'24',weight:'30',duration:'',notes:'10+8+6 reps'},
            {name:'Shoulder Press',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Plate Exercises',sets:'3',reps:'15',weight:'5',duration:'',notes:''},
            {name:'Full Squad',sets:'3',reps:'12',weight:'',duration:'',notes:''}
        ],
        'Multi Gym': [
            {name:'Lat Pulldown',sets:'3',reps:'12',weight:'40',duration:'',notes:''},
            {name:'Cable Chest Fly',sets:'3',reps:'12',weight:'30',duration:'',notes:''},
            {name:'Leg Press',sets:'3',reps:'15',weight:'100',duration:'',notes:''},
            {name:'Leg Extension',sets:'3',reps:'12',weight:'40',duration:'',notes:''},
            {name:'Leg Curl',sets:'3',reps:'12',weight:'40',duration:'',notes:''},
            {name:'Cable Row',sets:'3',reps:'12',weight:'40',duration:'',notes:''},
            {name:'Tricep Pushdown',sets:'3',reps:'12',weight:'30',duration:'',notes:''},
            {name:'Cable Crossover',sets:'3',reps:'12',weight:'20',duration:'',notes:''}
        ],
        'Plyometrics': [
            {name:'Box Jumps',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Medicine Ball Throw - Back Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''},
            {name:'Medicine Ball Throw - Front Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''},
            {name:'Medicine Ball Throw - Side Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''},
            {name:'Medicine Ball Throw - Jump Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''},
            {name:'Medicine Ball Throw - Sitting Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''},
            {name:'Medicine Ball Throw - Front Power Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''},
            {name:'Medicine Ball Throw - Stretch Throw',sets:'3',reps:'10',weight:'5',duration:'',notes:''}
        ],
        'Hurdles': [
            {name:'Hurdle Hops',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Lateral Hurdle Jumps',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Hurdle Walks',sets:'3',reps:'',weight:'',duration:'',notes:'30 meters'},
            {name:'Trail Leg Drills',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Lead Leg Drills',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Hurdle Step Overs',sets:'3',reps:'10',weight:'',duration:'',notes:''}
        ],
        'Hill Training': [
            {name:'Warm Up - Dynamic Stretching, Stridings',sets:'1',reps:'',weight:'',duration:'15',notes:''},
            {name:'80 Meters x 6',sets:'6',reps:'',weight:'',duration:'',notes:'80 meters'},
            {name:'60 Meters x 4',sets:'4',reps:'',weight:'',duration:'',notes:'60 meters'},
            {name:'Wall High Knee',sets:'3',reps:'20',weight:'',duration:'',notes:''},
            {name:'Wall Jumps',sets:'3',reps:'15',weight:'',duration:'',notes:''}
        ],
        'Steps Work Out': [
            {name:'1 Leg Hoppings',sets:'3',reps:'10',weight:'',duration:'',notes:'Each leg'},
            {name:'Squat Jump 1 Step',sets:'3',reps:'12',weight:'',duration:'',notes:''},
            {name:'Squat Jump 2 Steps',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Box Step Ups',sets:'3',reps:'15',weight:'',duration:'',notes:'Each leg'},
            {name:'Weighted Step Ups',sets:'3',reps:'12',weight:'20',duration:'',notes:''},
            {name:'Alternating Step Ups',sets:'3',reps:'20',weight:'',duration:'',notes:''},
            {name:'Explosive Step Ups',sets:'3',reps:'10',weight:'',duration:'',notes:''}
        ],
        'Sand Drill': [
            {name:'Sand Sprints',sets:'5',reps:'',weight:'',duration:'',notes:'30 meters'},
            {name:'Sand Bounds',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Sand Hill Runs',sets:'4',reps:'',weight:'',duration:'',notes:'50 meters'},
            {name:'Sand Agility Drills',sets:'3',reps:'',weight:'',duration:'5',notes:''},
            {name:'Sand High Knees',sets:'3',reps:'',weight:'',duration:'',notes:'30 meters'}
        ],
        'Wall': [
            {name:'Wall High Knees',sets:'3',reps:'30',weight:'',duration:'',notes:''},
            {name:'Wall Sprints',sets:'4',reps:'20',weight:'',duration:'',notes:''},
            {name:'Wall Drives',sets:'3',reps:'15',weight:'',duration:'',notes:'Each leg'},
            {name:'Wall Push Offs',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Wall Jumps',sets:'3',reps:'12',weight:'',duration:'',notes:''}
        ],
        'Warm Up': [
            {name:'Dynamic Stretching',sets:'1',reps:'',weight:'',duration:'5',notes:''},
            {name:'Light Jog',sets:'1',reps:'',weight:'',duration:'10',notes:''},
            {name:'Arm Circles',sets:'2',reps:'15',weight:'',duration:'',notes:''},
            {name:'Leg Swings',sets:'2',reps:'15',weight:'',duration:'',notes:'Each leg'},
            {name:'Hip Openers',sets:'2',reps:'10',weight:'',duration:'',notes:''},
            {name:'Stridings',sets:'6',reps:'',weight:'',duration:'',notes:''}
        ],
        'Cool Down': [
            {name:'Easy Jog',sets:'1',reps:'',weight:'',duration:'10',notes:''},
            {name:'Walking',sets:'1',reps:'',weight:'',duration:'5',notes:''},
            {name:'Static Stretching',sets:'1',reps:'',weight:'',duration:'15',notes:''},
            {name:'Deep Breathing',sets:'1',reps:'10',weight:'',duration:'',notes:''},
            {name:'Recovery Stretching',sets:'1',reps:'',weight:'',duration:'10',notes:''}
        ],
        'Core': [
            {name:'Plank',sets:'3',reps:'',weight:'',duration:'60',notes:'60 seconds'},
            {name:'Side Plank',sets:'3',reps:'',weight:'',duration:'45',notes:'Each side'},
            {name:'Russian Twists',sets:'3',reps:'20',weight:'',duration:'',notes:''},
            {name:'Bicycle Crunches',sets:'3',reps:'20',weight:'',duration:'',notes:''},
            {name:'Leg Raises',sets:'3',reps:'15',weight:'',duration:'',notes:''},
            {name:'Dead Bug',sets:'3',reps:'12',weight:'',duration:'',notes:''},
            {name:'Mountain Climbers',sets:'3',reps:'20',weight:'',duration:'',notes:''},
            {name:'Ab Wheel',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Hollow Hold',sets:'3',reps:'',weight:'',duration:'30',notes:''}
        ],
        'Stretching': [
            {name:'Hamstring',sets:'2',reps:'',weight:'',duration:'30',notes:'Each leg'},
            {name:'Quad Stretch',sets:'2',reps:'',weight:'',duration:'30',notes:'Each leg'},
            {name:'Hip Flexor',sets:'2',reps:'',weight:'',duration:'30',notes:'Each leg'},
            {name:'Calf Stretch',sets:'2',reps:'',weight:'',duration:'30',notes:'Each leg'},
            {name:'IT Band',sets:'2',reps:'',weight:'',duration:'30',notes:'Each leg'},
            {name:'Glute Stretch',sets:'2',reps:'',weight:'',duration:'30',notes:'Each leg'},
            {name:'Lower Back',sets:'2',reps:'',weight:'',duration:'30',notes:''},
            {name:'Upper Back',sets:'2',reps:'',weight:'',duration:'30',notes:''},
            {name:'Shoulder Stretch',sets:'2',reps:'',weight:'',duration:'30',notes:''},
            {name:'Chest Stretch',sets:'2',reps:'',weight:'',duration:'30',notes:''}
        ],
        'Cone Drills': [
            {name:'Zig Zag Drills',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Figure 8 Drills',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'T-Drill',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'L-Drill',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'Box Drill',sets:'3',reps:'',weight:'',duration:'',notes:''},
            {name:'5-10-5 Shuttle',sets:'3',reps:'',weight:'',duration:'',notes:''}
        ],
        'Circuit Training': [
            {name:'Push Ups',sets:'3',reps:'15',weight:'',duration:'',notes:''},
            {name:'Burpees',sets:'3',reps:'10',weight:'',duration:'',notes:''},
            {name:'Jump Squats',sets:'3',reps:'15',weight:'',duration:'',notes:''},
            {name:'Jumping Jacks',sets:'3',reps:'20',weight:'',duration:'',notes:''},
            {name:'Lunges',sets:'3',reps:'12',weight:'',duration:'',notes:'Each leg'},
            {name:'Mountain Climbers',sets:'3',reps:'20',weight:'',duration:'',notes:''}
        ]
    };
    
    // Category groups from your original
    const categoryGroups = {
        'Agility & Mobility': ['ABC Drills', 'Hurdles', 'Cone Drills', 'Sand Drill'],
        'Every Day Routine': ['Warm Up', 'Core', 'Cool Down', 'Stretching'],
        'Strength Training': ['Heavy Weights', 'Light Weights', 'Multi Gym'],
        'Power & Explosiveness': ['Plyometrics', 'Steps Work Out', 'Wall'],
        'Endurance': ['Cross Country 2K Run', 'Hill Training'],
        'Conditioning': ['Circuit Training']
    };
    
    // STATE - FULL VERSION FROM YOUR ORIGINAL
    let state = {
        selectedDate: new Date().toISOString().split('T')[0],
        sessions: { morning: [], evening: [] },
        todaysPlan: { morning: [], evening: [] },
        showPlanModal: false,
        planningSession: 'morning',
        planningStep: 'groups',
        selectedGroup: '',
        planningCategories: { morning: [], evening: [] },
        showWorkoutMode: false,
        workoutSession: '',
        currentExerciseIndex: 0,
        // Plan Week state
        showWeekPlanModal: false,
        weekPlanData: {},
        // Summary state
        showSummaryModal: false,
        summarySession: 'morning',
        // Export/Import state
        showExportModal: false,
        showImportModal: false,
        exportData: '',
        importData: '',
        // Edit Plan state
        showEditPlanModal: false,
        editingSession: '',
        currentPlanCategory: ''
    };
    
    // Core functions
    function loadSessions() {
        try {
            const key = 'athlete-sessions-' + state.selectedDate;
            const saved = localStorage.getItem(key);
            state.sessions = saved ? JSON.parse(saved) : { morning: [], evening: [] };
        } catch(e) {
            state.sessions = { morning: [], evening: [] };
        }
    }
    
    function saveSessions(updated) {
        try {
            const key = 'athlete-sessions-' + state.selectedDate;
            localStorage.setItem(key, JSON.stringify(updated));
            state.sessions = updated;
        } catch(e) {
            console.error('Save failed:', e);
        }
    }
    
    function loadTodaysPlan() {
        try {
            const key = 'athlete-todays-plan-' + state.selectedDate;
            const saved = localStorage.getItem(key);
            state.todaysPlan = saved ? JSON.parse(saved) : { morning: [], evening: [] };
        } catch(e) {
            state.todaysPlan = { morning: [], evening: [] };
        }
    }
    
    function saveTodaysPlan(updated) {
        try {
            const key = 'athlete-todays-plan-' + state.selectedDate;
            localStorage.setItem(key, JSON.stringify(updated));
            state.todaysPlan = updated;
        } catch(e) {
            console.error('Save plan failed:', e);
        }
    }
    
    function loadSessionPlan(sessionType) {
        if (state.todaysPlan[sessionType] && state.todaysPlan[sessionType].length > 0) {
            const updated = { ...state.sessions, [sessionType]: [...state.todaysPlan[sessionType]] };
            saveSessions(updated);
            render();
        } else {
            alert('No plan for ' + sessionType + ' session.');
        }
    }
    
    function getAllExercisesInSession(sessionType) {
        const allExercises = [];
        if (state.sessions[sessionType]) {
            state.sessions[sessionType].forEach((category, catIdx) => {
                if (category.exercises) {
                    category.exercises.forEach((exercise, exIdx) => {
                        allExercises.push({
                            ...exercise,
                            categoryName: category.category,
                            categoryId: category.id,
                            categoryIndex: catIdx,
                            exerciseIndex: exIdx
                        });
                    });
                }
            });
        }
        return allExercises;
    }
    
    // RENDER FUNCTION
    function render() {
        const root = document.getElementById('root');
        
        // Build HTML
        let html = `
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-6 mb-4 shadow-2xl">
                    <h1 class="text-3xl font-bold text-white flex items-center gap-3">
                        <span class="text-4xl">üí™</span>
                        Athlete Training Dashboard
                    </h1>
                </div>
                
                <!-- Controls -->
                <div class="bg-slate-800 rounded-xl p-4 mb-4">
                    <div class="flex flex-wrap items-center gap-4">
                        <input type="date" id="dateInput" value="${state.selectedDate}" 
                               class="bg-slate-700 text-white px-4 py-2 rounded-lg">
                        <button type="button" onclick="showPlanModal()" 
                                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            üìÖ Plan Today
                        </button>
                        <button type="button" onclick="showCoachPlanModal()" 
                                class="px-4 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 font-semibold">
                            üí™ Coach's Today Plan
                        </button>
                        <button type="button" onclick="showWeekPlanModal()" 
                                class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold">
                            üìÜ Plan Week
                        </button>
                        <button type="button" onclick="showSummaryModal()" 
                                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                            üìä Summary
                        </button>
                        <button type="button" onclick="showExportModal()" 
                                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold">
                            üíæ Export
                        </button>
                        <button type="button" onclick="showImportModal()" 
                                class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 font-semibold">
                            üì• Import
                        </button>
                        <button type="button" onclick="clearAll()" 
                                class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            üóëÔ∏è Clear
                        </button>
                    </div>
                </div>
        `;
        
        // Today's Plan Display
        if ((state.todaysPlan.morning && state.todaysPlan.morning.length > 0) || 
            (state.todaysPlan.evening && state.todaysPlan.evening.length > 0)) {
            html += `
                <div class="bg-slate-800 rounded-xl p-4 mb-4 border-2 border-blue-500/30">
                    <h2 class="text-lg font-bold text-white mb-3 flex items-center gap-2">
                        üìÖ Today's Plan
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            `;
            
            ['morning', 'evening'].forEach(session => {
                html += `
                    <div class="bg-slate-700 rounded-lg p-3">
                        <h3 class="text-white font-semibold flex items-center gap-2 mb-2">
                            ${session === 'morning' ? '‚òÄÔ∏è Morning Session' : 'üåô Evening Session'}
                        </h3>
                `;
                
                if (!state.todaysPlan[session] || state.todaysPlan[session].length === 0) {
                    html += '<p class="text-slate-400 text-sm">No plan created</p>';
                } else {
                    html += '<div class="space-y-1">';
                    state.todaysPlan[session].forEach((cat, idx) => {
                        html += `
                            <div class="bg-slate-600 p-2 rounded text-sm text-white">
                                ${cat.category} (${cat.exercises.length} exercises)
                            </div>
                        `;
                    });
                    html += '</div>';
                }
                
                html += '</div>';
            });
            
            html += '</div></div>';
        }
        
        // Session Cards
        html += '<div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4">';
        
        ['morning', 'evening'].forEach(sessionType => {
            html += `
                <div class="bg-slate-800 rounded-xl p-4 shadow-xl border border-slate-700">
                    <div class="flex items-center justify-between mb-3">
                        <h2 class="text-xl font-bold text-white flex items-center gap-2">
                            ${sessionType === 'morning' ? 
                                '<span class="text-2xl">‚òÄÔ∏è</span> Morning' : 
                                '<span class="text-2xl">üåô</span> Evening'
                            } Session
                        </h2>
                        <button onclick="loadSessionPlan('${sessionType}')" 
                                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2">
                            ‚Üí Load Plan
                        </button>
                    </div>
            `;
            
            if (!state.sessions[sessionType] || state.sessions[sessionType].length === 0) {
                html += `
                    <div class="bg-slate-700/50 rounded-lg p-6 text-center">
                        <p class="text-slate-400">No categories loaded</p>
                    </div>
                `;
            } else {
                html += `
                    <div>
                        <div class="text-slate-300 text-sm mb-3">
                            ${state.sessions[sessionType].length} categories loaded
                        </div>
                        <button onclick="startWorkout('${sessionType}')" 
                                class="w-full px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition font-semibold text-lg flex items-center justify-center gap-2">
                            ‚ñ∂Ô∏è Start Workout
                        </button>
                    </div>
                `;
            }
            
            html += '</div>';
        });
        
        html += '</div>'; // End grid
        
        // Success Box
        html += `
            <div class="bg-green-900/30 border-2 border-green-500 rounded-xl p-4 text-center">
                <p class="text-green-400 font-semibold text-lg">
                    ‚úÖ Full-Featured Athlete Dashboard is Working!
                </p>
                <p class="text-slate-300 text-sm mt-2">
                    All 18 categories ‚Ä¢ Complete workout tracking ‚Ä¢ Add to Home Screen to install
                </p>
            </div>
        `;
        
        html += '</div>'; // End container
        
        root.innerHTML = html;
        
        // Add event listener to date input
        const dateInput = document.getElementById('dateInput');
        if (dateInput) {
            dateInput.addEventListener('change', function(e) {
                state.selectedDate = e.target.value;
                loadSessions();
                loadTodaysPlan();
                render();
            });
        }
    }
    
    // PLAN MODAL FUNCTIONS
    function showPlanModal() {
        state.showPlanModal = true;
        state.planningStep = 'groups';
        state.selectedGroup = '';
        state.planningCategories = { morning: [], evening: [] };
        renderPlanModal();
    }
    
    function renderPlanModal() {
        // Remove existing modal if any
        const existing = document.getElementById('planModal');
        if (existing) existing.remove();
        
        let modalHTML = `
            <div id="planModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                <div class="bg-slate-800 rounded-2xl max-w-4xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-4 border-b border-slate-700">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-lg font-bold text-white">
                                ${state.planningStep === 'groups' ? 'Step 1: Select Training Focus' : 'Step 2: Select Categories'}
                            </h2>
                            <button onclick="closePlanModal()" class="text-white text-2xl">√ó</button>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="setPlanningSession('morning')" 
                                    class="flex-1 px-4 py-2 rounded-lg font-semibold ${state.planningSession === 'morning' ? 'bg-yellow-600 text-white' : 'bg-slate-700 text-slate-400'}">
                                Morning
                            </button>
                            <button onclick="setPlanningSession('evening')" 
                                    class="flex-1 px-4 py-2 rounded-lg font-semibold ${state.planningSession === 'evening' ? 'bg-blue-600 text-white' : 'bg-slate-700 text-slate-400'}">
                                Evening
                            </button>
                        </div>
                    </div>
        `;
        
        if (state.planningStep === 'groups') {
            modalHTML += '<div class="p-4 overflow-y-auto flex-1"><div class="grid grid-cols-2 gap-3">';
            Object.keys(categoryGroups).forEach(group => {
                const isSelected = state.selectedGroup === group;
                modalHTML += `
                    <button onclick="selectGroup('${group}')" 
                            class="p-4 rounded-lg text-white transition ${isSelected ? 'bg-green-600' : 'bg-slate-700 hover:bg-slate-600'}">
                        <h3 class="font-bold mb-2">${group}</h3>
                        <div class="text-xs space-y-1">
                            ${categoryGroups[group].map(cat => `<div>${cat}</div>`).join('')}
                        </div>
                    </button>
                `;
            });
            modalHTML += '</div></div>';
            
            modalHTML += `
                <div class="p-4 border-t border-slate-700 flex gap-3">
                    <button onclick="closePlanModal()" class="px-4 py-2 bg-slate-600 text-white rounded-lg">Cancel</button>
                    <button onclick="nextStep()" ${!state.selectedGroup ? 'disabled' : ''} 
                            class="px-4 py-2 rounded-lg ${state.selectedGroup ? 'bg-blue-600 text-white' : 'bg-slate-600 text-slate-400'}">
                        Next ‚Üí
                    </button>
                </div>
            `;
        } else {
            modalHTML += '<div class="p-4 overflow-y-auto flex-1"><div class="grid grid-cols-2 md:grid-cols-3 gap-2">';
            if (state.selectedGroup && categoryGroups[state.selectedGroup]) {
                categoryGroups[state.selectedGroup].forEach(category => {
                    const isSelected = state.planningCategories[state.planningSession].some(c => c.category === category);
                    modalHTML += `
                        <button onclick="toggleCategory('${category}')" 
                                class="p-3 rounded-lg ${isSelected ? 'bg-green-600 text-white' : 'bg-slate-700 text-white'}">
                            <h3 class="font-bold text-sm">${category}</h3>
                        </button>
                    `;
                });
            }
            modalHTML += '</div></div>';
            
            modalHTML += `
                <div class="p-4 border-t border-slate-700 flex gap-3">
                    <button onclick="backStep()" class="px-4 py-2 bg-slate-600 text-white rounded-lg">‚Üê Back</button>
                    <button onclick="savePlan()" class="px-4 py-2 bg-green-600 text-white rounded-lg">Save Plan</button>
                </div>
            `;
        }
        
        modalHTML += '</div></div>';
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
    }
    
    function closePlanModal() {
        const modal = document.getElementById('planModal');
        if (modal) modal.remove();
        state.showPlanModal = false;
    }
    
    function setPlanningSession(session) {
        state.planningSession = session;
        renderPlanModal();
    }
    
    function selectGroup(group) {
        state.selectedGroup = group;
        renderPlanModal();
    }
    
    function nextStep() {
        state.planningStep = 'categories';
        renderPlanModal();
    }
    
    function backStep() {
        state.planningStep = 'groups';
        renderPlanModal();
    }
    
    function toggleCategory(category) {
        const idx = state.planningCategories[state.planningSession].findIndex(c => c.category === category);
        if (idx > -1) {
            state.planningCategories[state.planningSession].splice(idx, 1);
        } else {
            state.planningCategories[state.planningSession].push({
                id: category + '-' + Date.now(),
                category: category,
                exercises: categories[category].map(ex => ({ ...ex, completed: false }))
            });
        }
        renderPlanModal();
    }
    
    function savePlan() {
        const updated = { ...state.todaysPlan, [state.planningSession]: state.planningCategories[state.planningSession] };
        saveTodaysPlan(updated);
        closePlanModal();
        state.planningStep = 'groups';
        state.selectedGroup = '';
        state.planningCategories = { morning: [], evening: [] };
        render();
    }
    
    function clearAll() {
        if (confirm('Clear all plans and sessions for today?')) {
            const empty = { morning: [], evening: [] };
            localStorage.setItem('athlete-todays-plan-' + state.selectedDate, JSON.stringify(empty));
            localStorage.setItem('athlete-sessions-' + state.selectedDate, JSON.stringify(empty));
            state.todaysPlan = empty;
            state.sessions = empty;
            render();
        }
    }
    
    // WORKOUT MODE
    function startWorkout(sessionType) {
        state.workoutSession = sessionType;
        state.currentExerciseIndex = 0;
        state.showWorkoutMode = true;
        renderWorkoutMode();
    }
    
    function renderWorkoutMode() {
        const allExercises = getAllExercisesInSession(state.workoutSession);
        const currentEx = allExercises[state.currentExerciseIndex];
        
        // Remove existing workout screen
        const existing = document.getElementById('workoutScreen');
        if (existing) existing.remove();
        
        let workoutHTML = '';
        
        if (!currentEx) {
            // Workout complete
            workoutHTML = `
                <div id="workoutScreen" class="fixed inset-0 bg-slate-900 z-50 flex items-center justify-center p-4">
                    <div class="bg-slate-800 rounded-2xl p-8 max-w-md w-full text-center">
                        <div class="text-6xl mb-4">üéâ</div>
                        <h2 class="text-2xl font-bold text-white mb-4">Workout Complete!</h2>
                        <button onclick="closeWorkout()" class="w-full px-6 py-3 bg-green-600 text-white rounded-lg font-semibold">
                            Back to Dashboard
                        </button>
                    </div>
                </div>
            `;
        } else {
            workoutHTML = `
                <div id="workoutScreen" class="fixed inset-0 bg-slate-900 z-50 flex flex-col">
                    <div class="bg-slate-800 p-4 border-b border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <h2 class="text-xl font-bold text-white">
                                ${state.workoutSession === 'morning' ? '‚òÄÔ∏è' : 'üåô'} ${state.workoutSession === 'morning' ? 'Morning' : 'Evening'} Workout
                            </h2>
                            <button type="button" onclick="closeWorkout()" class="text-white text-2xl">√ó</button>
                        </div>
                        <div class="flex items-center justify-between mb-2">
                            <div class="text-sm text-slate-400">
                                Exercise ${state.currentExerciseIndex + 1} of ${allExercises.length}
                            </div>
                            <div class="flex gap-2">
                                <span class="bg-green-600 text-white px-2 py-1 rounded text-sm font-bold">
                                    ‚úì ${allExercises.filter(ex => ex.completed || ex.status === 'completed').length}
                                </span>
                                <span class="bg-orange-600 text-white px-2 py-1 rounded text-sm font-bold">
                                    ‚è≠Ô∏è ${allExercises.filter(ex => ex.status === 'skipped').length}
                                </span>
                            </div>
                        </div>
                        <div class="mt-2 bg-slate-700 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full transition-all duration-300" 
                                 style="width: ${((state.currentExerciseIndex + 1) / allExercises.length) * 100}%"></div>
                        </div>
                    </div>
                    
                    <div class="flex-1 overflow-y-auto p-6">
                        <div class="mb-4">
                            <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm">${currentEx.categoryName}</span>
                        </div>
                        <div class="flex items-center gap-4 mb-4">
                            <span class="text-5xl">${exerciseEmojis[currentEx.name] || 'üí™'}</span>
                            <h1 class="text-3xl font-bold text-white">${currentEx.name}</h1>
                        </div>
                        
                        <!-- Scrollable Dial Wheels -->
                        <div class="bg-slate-800 rounded-lg p-4 mb-4">
                            <div class="grid grid-cols-4 gap-2">
                                <!-- Sets Wheel -->
                                <div>
                                    <label class="text-white text-sm block mb-1 text-center font-bold">Sets</label>
                                    <div class="relative h-40 bg-gradient-to-b from-slate-800 via-slate-700 to-slate-800 rounded-xl overflow-hidden">
                                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10">
                                            <div class="w-full h-12 bg-blue-500/10 border-y border-blue-500/30"></div>
                                        </div>
                                        <div class="h-full overflow-y-scroll scrollbar-hide" 
                                             id="setsWheel"
                                             onscroll="handleWheelScroll('sets', this)">
                                            <div class="h-16"></div>
                                            ${Array.from({length: 51}, (_, i) => {
                                                const current = parseInt(currentEx.sets) || 0;
                                                const distance = Math.abs(i - current);
                                                const opacity = distance === 0 ? 1 : distance === 1 ? 0.5 : 0.2;
                                                const fontSize = distance === 0 ? 'text-4xl' : distance === 1 ? 'text-2xl' : 'text-lg';
                                                return `<div class="h-12 flex items-center justify-center font-bold text-white ${fontSize}" style="opacity: ${opacity}">${i}</div>`;
                                            }).join('')}
                                            <div class="h-16"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Reps Wheel -->
                                <div>
                                    <label class="text-white text-sm block mb-1 text-center font-bold">Reps</label>
                                    <div class="relative h-40 bg-gradient-to-b from-slate-800 via-slate-700 to-slate-800 rounded-xl overflow-hidden">
                                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10">
                                            <div class="w-full h-12 bg-blue-500/10 border-y border-blue-500/30"></div>
                                        </div>
                                        <div class="h-full overflow-y-scroll scrollbar-hide"
                                             id="repsWheel"
                                             onscroll="handleWheelScroll('reps', this)">
                                            <div class="h-16"></div>
                                            ${Array.from({length: 101}, (_, i) => {
                                                const current = parseInt(currentEx.reps) || 0;
                                                const distance = Math.abs(i - current);
                                                const opacity = distance === 0 ? 1 : distance === 1 ? 0.5 : 0.2;
                                                const fontSize = distance === 0 ? 'text-4xl' : distance === 1 ? 'text-2xl' : 'text-lg';
                                                return `<div class="h-12 flex items-center justify-center font-bold text-white ${fontSize}" style="opacity: ${opacity}">${i}</div>`;
                                            }).join('')}
                                            <div class="h-16"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Weight Wheel -->
                                <div>
                                    <label class="text-white text-sm block mb-1 text-center font-bold">Weight</label>
                                    <div class="relative h-40 bg-gradient-to-b from-slate-800 via-slate-700 to-slate-800 rounded-xl overflow-hidden">
                                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10">
                                            <div class="w-full h-12 bg-blue-500/10 border-y border-blue-500/30 flex items-center justify-end pr-2">
                                                <span class="text-blue-400 text-xs font-medium">kg</span>
                                            </div>
                                        </div>
                                        <div class="h-full overflow-y-scroll scrollbar-hide"
                                             id="weightWheel"
                                             onscroll="handleWheelScroll('weight', this)">
                                            <div class="h-16"></div>
                                            ${Array.from({length: 201}, (_, i) => {
                                                const val = i * 5;
                                                const current = parseInt(currentEx.weight) || 0;
                                                const distance = Math.abs(val - current) / 5;
                                                const opacity = distance === 0 ? 1 : distance === 1 ? 0.5 : 0.2;
                                                const fontSize = distance === 0 ? 'text-4xl' : distance === 1 ? 'text-2xl' : 'text-lg';
                                                return `<div class="h-12 flex items-center justify-center font-bold text-white ${fontSize}" style="opacity: ${opacity}">${val}</div>`;
                                            }).join('')}
                                            <div class="h-16"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Duration Wheel -->
                                <div>
                                    <label class="text-white text-sm block mb-1 text-center font-bold">Duration</label>
                                    <div class="relative h-40 bg-gradient-to-b from-slate-800 via-slate-700 to-slate-800 rounded-xl overflow-hidden">
                                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-10">
                                            <div class="w-full h-12 bg-blue-500/10 border-y border-blue-500/30 flex items-center justify-end pr-1">
                                                <span class="text-blue-400 text-xs font-medium">min</span>
                                            </div>
                                        </div>
                                        <div class="h-full overflow-y-scroll scrollbar-hide"
                                             id="durationWheel"
                                             onscroll="handleWheelScroll('duration', this)">
                                            <div class="h-16"></div>
                                            ${Array.from({length: 121}, (_, i) => {
                                                const current = parseInt(currentEx.duration) || 0;
                                                const distance = Math.abs(i - current);
                                                const opacity = distance === 0 ? 1 : distance === 1 ? 0.5 : 0.2;
                                                const fontSize = distance === 0 ? 'text-4xl' : distance === 1 ? 'text-2xl' : 'text-lg';
                                                return `<div class="h-12 flex items-center justify-center font-bold text-white ${fontSize}" style="opacity: ${opacity}">${i}</div>`;
                                            }).join('')}
                                            <div class="h-16"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Notes Field -->
                            <div class="mt-4">
                                <label class="text-white font-bold block mb-2 text-xs">NOTES</label>
                                <input type="text" value="${currentEx.notes || ''}" 
                                       placeholder="Add notes..."
                                       onchange="updateExerciseField(${state.currentExerciseIndex}, 'notes', this.value)"
                                       class="w-full bg-slate-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-slate-800 p-4 border-t border-slate-700">
                        <div class="flex gap-2">
                            <button type="button" onclick="prevExercise()" ${state.currentExerciseIndex === 0 ? 'disabled' : ''}
                                    class="px-4 py-3 bg-slate-700 text-white rounded-lg disabled:opacity-50 font-semibold">
                                ‚Üê Prev
                            </button>
                            <button type="button" onclick="skipExercise()" 
                                    class="flex-1 px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-semibold">
                                Skip
                            </button>
                            <button type="button" onclick="completeExercise()" 
                                    class="flex-1 px-4 py-3 ${currentEx.completed || currentEx.status === 'completed' ? 'bg-green-700' : 'bg-green-600 hover:bg-green-700'} text-white rounded-lg font-semibold">
                                ${currentEx.completed || currentEx.status === 'completed' ? '‚úì Completed' : 'Complete'}
                            </button>
                            <button type="button" onclick="nextExercise()" ${state.currentExerciseIndex >= allExercises.length - 1 ? 'disabled' : ''}
                                    class="px-4 py-3 bg-slate-700 text-white rounded-lg disabled:opacity-50 font-semibold">
                                Next ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        document.body.insertAdjacentHTML('beforeend', workoutHTML);
        
        // Set initial scroll positions for dial wheels (after DOM insertion)
        if (currentEx) {
            setTimeout(() => {
                const setsEl = document.getElementById('setsWheel');
                const repsEl = document.getElementById('repsWheel');
                const weightEl = document.getElementById('weightWheel');
                const durationEl = document.getElementById('durationWheel');
                
                if (setsEl) setsEl.scrollTop = (parseInt(currentEx.sets) || 0) * 48;
                if (repsEl) repsEl.scrollTop = (parseInt(currentEx.reps) || 0) * 48;
                if (weightEl) weightEl.scrollTop = ((parseInt(currentEx.weight) || 0) / 5) * 48;
                if (durationEl) durationEl.scrollTop = (parseInt(currentEx.duration) || 0) * 48;
            }, 100);
        }
    }
    
    function prevExercise() {
        if (state.currentExerciseIndex > 0) {
            state.currentExerciseIndex--;
            renderWorkoutMode();
        }
    }
    
    function nextExercise() {
        const allExercises = getAllExercisesInSession(state.workoutSession);
        if (state.currentExerciseIndex < allExercises.length - 1) {
            state.currentExerciseIndex++;
            renderWorkoutMode();
        }
    }
    
    function completeExercise() {
        const allExercises = getAllExercisesInSession(state.workoutSession);
        const currentEx = allExercises[state.currentExerciseIndex];
        
        if (currentEx) {
            // Check if already completed
            if (currentEx.completed || currentEx.status === 'completed') {
                // Already completed, just move to next
                state.currentExerciseIndex++;
                renderWorkoutMode();
            } else {
                // Mark as completed
                const updated = { ...state.sessions };
                updated[state.workoutSession][currentEx.categoryIndex].exercises[currentEx.exerciseIndex].completed = true;
                updated[state.workoutSession][currentEx.categoryIndex].exercises[currentEx.exerciseIndex].status = 'completed';
                saveSessions(updated);
                
                // Show visual feedback and re-render to show "‚úì Completed" button
                const screen = document.getElementById('workoutScreen');
                if (screen) {
                    screen.style.transition = 'background-color 0.2s';
                    screen.style.backgroundColor = '#16a34a'; // green flash
                    setTimeout(() => {
                        screen.style.backgroundColor = '';
                        // Re-render to show the updated button text, but DON'T advance
                        renderWorkoutMode();
                    }, 200);
                } else {
                    renderWorkoutMode();
                }
            }
        }
    }
    
    function skipExercise() {
        const allExercises = getAllExercisesInSession(state.workoutSession);
        const currentEx = allExercises[state.currentExerciseIndex];
        
        if (currentEx) {
            // Mark as skipped
            const updated = { ...state.sessions };
            updated[state.workoutSession][currentEx.categoryIndex].exercises[currentEx.exerciseIndex].status = 'skipped';
            saveSessions(updated);
            
            // Show visual feedback
            const screen = document.getElementById('workoutScreen');
            if (screen) {
                screen.style.transition = 'background-color 0.3s';
                screen.style.backgroundColor = '#ea580c'; // orange flash
                setTimeout(() => {
                    screen.style.backgroundColor = '';
                    state.currentExerciseIndex++;
                    renderWorkoutMode();
                }, 300);
            } else {
                state.currentExerciseIndex++;
                renderWorkoutMode();
            }
        } else {
            state.currentExerciseIndex++;
            renderWorkoutMode();
        }
    }
    
    function updateExerciseField(exerciseIndex, field, value) {
        const allExercises = getAllExercisesInSession(state.workoutSession);
        const currentEx = allExercises[exerciseIndex];
        
        if (currentEx) {
            const updated = { ...state.sessions };
            updated[state.workoutSession][currentEx.categoryIndex].exercises[currentEx.exerciseIndex][field] = value;
            saveSessions(updated);
        }
    }
    
    function handleWheelScroll(field, element) {
        const scrollTop = element.scrollTop;
        const itemHeight = 48;
        let value;
        
        if (field === 'weight') {
            // Weight goes in increments of 5
            const index = Math.round(scrollTop / itemHeight);
            value = (index * 5).toString();
        } else {
            // Sets, Reps, Duration go 1 by 1
            value = Math.round(scrollTop / itemHeight).toString();
        }
        
        const allExercises = getAllExercisesInSession(state.workoutSession);
        const currentEx = allExercises[state.currentExerciseIndex];
        
        if (currentEx) {
            const updated = { ...state.sessions };
            updated[state.workoutSession][currentEx.categoryIndex].exercises[currentEx.exerciseIndex][field] = value;
            saveSessions(updated);
        }
    }
    
    function closeWorkout() {
        const workout = document.getElementById('workoutScreen');
        if (workout) workout.remove();
        state.showWorkoutMode = false;
        render();
    }
    
                    
            
    

    // ==========================================
    // PLAN WEEK
    // ==========================================
    function showWeekPlanModal() {
        state.showWeekPlanModal = true;
        const modal = `
            <div id="weekPlanModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                <div class="bg-slate-800 rounded-2xl max-w-4xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-4 border-b border-slate-700 flex items-center justify-between">
                        <h2 class="text-xl font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">üìÜ</span>
                            Plan Your Week
                        </h2>
                        <button type="button" onclick="closeWeekPlanModal()" class="text-white text-2xl">√ó</button>
                    </div>
                    <div class="p-6 overflow-y-auto flex-1">
                        <p class="text-slate-300 mb-4">Plan your training for the upcoming week</p>
                        <div class="space-y-3">
                            ${['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].map(day => `
                                <div class="bg-slate-700 rounded-lg p-4">
                                    <h3 class="font-bold text-white mb-2">${day}</h3>
                                    <input type="text" placeholder="Add workout plan..."
                                           class="w-full bg-slate-600 text-white px-3 py-2 rounded"
                                           onchange="saveWeekPlan('${day}', this.value)">
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="p-4 border-t border-slate-700">
                        <button type="button" onclick="closeWeekPlanModal()" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg font-semibold">Done</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modal);
    }
    
    function saveWeekPlan(day, value) {
        if (!state.weekPlanData) state.weekPlanData = {};
        state.weekPlanData[day] = value;
        localStorage.setItem('athlete-week-plan', JSON.stringify(state.weekPlanData));
    }
    
    function closeWeekPlanModal() {
        const modal = document.getElementById('weekPlanModal');
        if (modal) modal.remove();
        state.showWeekPlanModal = false;
    }
    
    // ==========================================
    // SUMMARY
    // ==========================================
    function showSummaryModal() {
        state.showSummaryModal = true;
        
        // Calculate summary stats
        const allSessions = [];
        const keys = Object.keys(localStorage).filter(k => k.startsWith('athlete-sessions-'));
        keys.forEach(key => {
            const data = JSON.parse(localStorage.getItem(key));
            if (data.morning) allSessions.push(...data.morning);
            if (data.evening) allSessions.push(...data.evening);
        });
        
        const totalSessions = keys.length;
        const totalExercises = allSessions.reduce((sum, cat) => sum + (cat.exercises?.length || 0), 0);
        const completedExercises = allSessions.reduce((sum, cat) => 
            sum + (cat.exercises?.filter(e => e.completed || e.status === 'completed').length || 0), 0);
        
        const modal = `
            <div id="summaryModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                <div class="bg-slate-800 rounded-2xl max-w-2xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-4 border-b border-slate-700 flex items-center justify-between">
                        <h2 class="text-xl font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">üìä</span>
                            Training Summary
                        </h2>
                        <button type="button" onclick="closeSummaryModal()" class="text-white text-2xl">√ó</button>
                    </div>
                    <div class="p-6 overflow-y-auto flex-1">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl p-6 text-white">
                                <div class="text-4xl font-bold mb-2">${totalSessions}</div>
                                <div class="text-blue-100">Total Sessions</div>
                            </div>
                            <div class="bg-gradient-to-br from-green-600 to-green-700 rounded-xl p-6 text-white">
                                <div class="text-4xl font-bold mb-2">${totalExercises}</div>
                                <div class="text-green-100">Total Exercises</div>
                            </div>
                            <div class="bg-gradient-to-br from-purple-600 to-purple-700 rounded-xl p-6 text-white">
                                <div class="text-4xl font-bold mb-2">${completedExercises}</div>
                                <div class="text-purple-100">Completed</div>
                            </div>
                            <div class="bg-gradient-to-br from-orange-600 to-orange-700 rounded-xl p-6 text-white">
                                <div class="text-4xl font-bold mb-2">${totalExercises > 0 ? Math.round(completedExercises / totalExercises * 100) : 0}%</div>
                                <div class="text-orange-100">Completion Rate</div>
                            </div>
                        </div>
                        <h3 class="text-white font-bold mb-3">Recent Sessions</h3>
                        <div class="space-y-2">
                            ${keys.slice(-5).reverse().map(key => {
                                const date = key.replace('athlete-sessions-', '');
                                const data = JSON.parse(localStorage.getItem(key));
                                const morningCount = data.morning?.reduce((sum, c) => sum + (c.exercises?.length || 0), 0) || 0;
                                const eveningCount = data.evening?.reduce((sum, c) => sum + (c.exercises?.length || 0), 0) || 0;
                                return `
                                    <div class="bg-slate-700 rounded-lg p-3">
                                        <div class="text-white font-semibold">${date}</div>
                                        <div class="text-slate-300 text-sm">
                                            ${morningCount > 0 ? `‚òÄÔ∏è Morning: ${morningCount} exercises` : ''}
                                            ${eveningCount > 0 ? ` üåô Evening: ${eveningCount} exercises` : ''}
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    <div class="p-4 border-t border-slate-700">
                        <button type="button" onclick="closeSummaryModal()" class="w-full px-4 py-2 bg-green-600 text-white rounded-lg font-semibold">Close</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modal);
    }
    
    function closeSummaryModal() {
        const modal = document.getElementById('summaryModal');
        if (modal) modal.remove();
        state.showSummaryModal = false;
    }
    
    // ==========================================
    // EXPORT / IMPORT
    // ==========================================
    function showExportModal() {
        state.showExportModal = true;
        
        // Collect all data
        const exportData = {
            sessions: {},
            plans: {},
            pbs: {},
            sbs: {}
        };
        
        // Get all sessions
        Object.keys(localStorage).forEach(key => {
            if (key.startsWith('athlete-sessions-')) {
                exportData.sessions[key] = JSON.parse(localStorage.getItem(key));
            }
            if (key.startsWith('athlete-plan-')) {
                exportData.plans[key] = JSON.parse(localStorage.getItem(key));
            }
            if (key.startsWith('athlete-pb-')) {
                exportData.pbs[key] = localStorage.getItem(key);
            }
            if (key.startsWith('athlete-sb-')) {
                exportData.sbs[key] = localStorage.getItem(key);
            }
        });
        
        state.exportData = JSON.stringify(exportData, null, 2);
        
        const modal = `
            <div id="exportModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                <div class="bg-slate-800 rounded-2xl max-w-2xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-4 border-b border-slate-700 flex items-center justify-between">
                        <h2 class="text-xl font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">üíæ</span>
                            Export Data
                        </h2>
                        <button type="button" onclick="closeExportModal()" class="text-white text-2xl">√ó</button>
                    </div>
                    <div class="p-6 overflow-y-auto flex-1">
                        <p class="text-slate-300 mb-4">Download your complete training data as a backup</p>
                        <textarea readonly class="w-full h-64 bg-slate-700 text-white p-3 rounded font-mono text-sm">${state.exportData}</textarea>
                    </div>
                    <div class="p-4 border-t border-slate-700 flex gap-3">
                        <button type="button" onclick="closeExportModal()" class="px-4 py-2 bg-slate-600 text-white rounded-lg">Cancel</button>
                        <button type="button" onclick="downloadExport()" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold">‚¨áÔ∏è Download</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modal);
    }
    
    function downloadExport() {
        const blob = new Blob([state.exportData], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `athlete-backup-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
        closeExportModal();
    }
    
    function closeExportModal() {
        const modal = document.getElementById('exportModal');
        if (modal) modal.remove();
        state.showExportModal = false;
    }
    
    function showImportModal() {
        state.showImportModal = true;
        
        const modal = `
            <div id="importModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
                <div class="bg-slate-800 rounded-2xl max-w-2xl w-full max-h-[90vh] flex flex-col">
                    <div class="p-4 border-b border-slate-700 flex items-center justify-between">
                        <h2 class="text-xl font-bold text-white flex items-center gap-2">
                            <span class="text-2xl">üì•</span>
                            Import Data
                        </h2>
                        <button type="button" onclick="closeImportModal()" class="text-white text-2xl">√ó</button>
                    </div>
                    <div class="p-6 overflow-y-auto flex-1">
                        <p class="text-slate-300 mb-4">Upload a backup file to restore your data</p>
                        <input type="file" id="importFile" accept=".json" class="w-full bg-slate-700 text-white p-3 rounded mb-4">
                        <textarea id="importText" placeholder="Or paste JSON data here..." class="w-full h-64 bg-slate-700 text-white p-3 rounded font-mono text-sm"></textarea>
                    </div>
                    <div class="p-4 border-t border-slate-700 flex gap-3">
                        <button type="button" onclick="closeImportModal()" class="px-4 py-2 bg-slate-600 text-white rounded-lg">Cancel</button>
                        <button type="button" onclick="processImport()" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold">‚¨ÜÔ∏è Import</button>
                    </div>
                </div>
            </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modal);
        
        document.getElementById('importFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    document.getElementById('importText').value = event.target.result;
                };
                reader.readAsText(file);
            }
        });
    }
    
    function processImport() {
        const text = document.getElementById('importText').value;
        if (!text) {
            alert('Please select a file or paste JSON data');
            return;
        }
        
        try {
            const data = JSON.parse(text);
            
            // Import sessions
            if (data.sessions) {
                Object.keys(data.sessions).forEach(key => {
                    localStorage.setItem(key, JSON.stringify(data.sessions[key]));
                });
            }
            
            // Import plans
            if (data.plans) {
                Object.keys(data.plans).forEach(key => {
                    localStorage.setItem(key, JSON.stringify(data.plans[key]));
                });
            }
            
            // Import PBs and SBs
            if (data.pbs) {
                Object.keys(data.pbs).forEach(key => {
                    localStorage.setItem(key, data.pbs[key]);
                });
            }
            if (data.sbs) {
                Object.keys(data.sbs).forEach(key => {
                    localStorage.setItem(key, data.sbs[key]);
                });
            }
            
            alert('‚úÖ Data imported successfully!\n\nReloading page...');
            closeImportModal();
            location.reload();
        } catch (e) {
            alert('‚ùå Error importing data: ' + e.message);
        }
    }
    
    function closeImportModal() {
        const modal = document.getElementById('importModal');
        if (modal) modal.remove();
        state.showImportModal = false;
    }
    

    // ==========================================
    // COACH'S PLAN - BRAND NEW SIMPLE VERSION
    // ==========================================
    
    function showCoachPlanModal() {
        // Simple modal with just category selection
        const modal = document.createElement('div');
        modal.id = 'coachPlanModal';
        modal.className = 'fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4';
        
        let html = '<div class="bg-slate-800 rounded-2xl max-w-4xl w-full max-h-[90vh] flex flex-col">';
        
        // Header
        html += '<div class="p-4 border-b border-slate-700">';
        html += '<div class="flex items-center justify-between">';
        html += '<h2 class="text-xl font-bold text-white flex items-center gap-2">';
        html += '<span class="text-2xl">üí™</span> Coach\'s Today Plan</h2>';
        html += '<button type="button" onclick="closeCoachPlanModal()" class="text-white text-2xl">√ó</button>';
        html += '</div></div>';
        
        // Body
        html += '<div class="p-6 overflow-y-auto flex-1">';
        html += '<p class="text-white mb-4">Select workout categories for your training session:</p>';
        html += '<div class="grid grid-cols-2 md:grid-cols-3 gap-3">';
        
        // List all workout categories
        const workoutCategories = [
            'ABC Drills', 'Heavy Weights', 'Light Weights', 'Plyometrics',
            'Multi Gym', 'Hurdles', 'Hill Training', 'Steps Work Out',
            'Sand Drill', 'Stretching', 'Cone Drills', 'Circuit Training'
        ];
        
        workoutCategories.forEach(cat => {
            if (categories[cat]) {
                html += '<label class="flex items-center gap-2 p-3 bg-slate-700 rounded-lg cursor-pointer hover:bg-slate-600">';
                html += '<input type="checkbox" class="w-4 h-4 coach-category" data-category="' + cat + '">';
                html += '<span class="text-white text-sm">' + cat + '</span>';
                html += '</label>';
            }
        });
        
        html += '</div></div>';
        
        // Footer
        html += '<div class="p-4 border-t border-slate-700 flex gap-3">';
        html += '<button type="button" onclick="closeCoachPlanModal()" class="px-4 py-2 bg-slate-600 text-white rounded-lg">Cancel</button>';
        html += '<button type="button" onclick="saveCoachPlan()" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-semibold">‚úì Save Plan</button>';
        html += '</div>';
        
        html += '</div>';
        
        modal.innerHTML = html;
        document.body.appendChild(modal);
    }
    
    function saveCoachPlan() {
        console.log('üíæ saveCoachPlan called');
        
        // Get selected categories
        const checkboxes = document.querySelectorAll('.coach-category:checked');
        console.log('Checkboxes found:', checkboxes.length);
        
        const selectedCategories = [];
        
        checkboxes.forEach(cb => {
            const categoryName = cb.getAttribute('data-category');
            console.log('Selected category:', categoryName);
            if (categories[categoryName]) {
                selectedCategories.push({
                    id: categoryName + '-' + Date.now(),
                    category: categoryName,
                    exercises: categories[categoryName].map(ex => ({...ex, completed: false}))
                });
            }
        });
        
        console.log('Total selected categories:', selectedCategories.length);
        
        if (selectedCategories.length === 0) {
            alert('Please select at least one category!');
            return;
        }
        
        // Build complete plan: Warm Up + Selected + Daily Routine + Core + Cool Down
        const completePlan = [];
        
        // Add Warm Up
        if (categories['Warm Up'] && categories['Warm Up'].length > 0) {
            completePlan.push({
                id: 'warm-up-' + Date.now(),
                category: 'Warm Up',
                exercises: categories['Warm Up'].map(ex => ({...ex, completed: false}))
            });
            console.log('‚úÖ Added Warm Up');
        } else {
            console.log('‚ö†Ô∏è Warm Up category not found or empty');
        }
        
        // Add selected workout categories
        completePlan.push(...selectedCategories);
        console.log('‚úÖ Added', selectedCategories.length, 'workout categories');
        
        // Add Step Ups
        if (categories['Step Ups'] && categories['Step Ups'].length > 0) {
            completePlan.push({
                id: 'step-ups-' + Date.now(),
                category: 'Step Ups',
                exercises: categories['Step Ups'].map(ex => ({...ex, completed: false}))
            });
            console.log('‚úÖ Added Step Ups');
        } else {
            console.log('‚ö†Ô∏è Step Ups category not found or empty');
        }
        
        // Add Wall
        if (categories['Wall'] && categories['Wall'].length > 0) {
            completePlan.push({
                id: 'wall-' + Date.now(),
                category: 'Wall',
                exercises: categories['Wall'].map(ex => ({...ex, completed: false}))
            });
            console.log('‚úÖ Added Wall');
        } else {
            console.log('‚ö†Ô∏è Wall category not found or empty');
        }
        
        // Add Core
        if (categories['Core'] && categories['Core'].length > 0) {
            completePlan.push({
                id: 'core-' + Date.now(),
                category: 'Core',
                exercises: categories['Core'].map(ex => ({...ex, completed: false}))
            });
            console.log('‚úÖ Added Core');
        } else {
            console.log('‚ö†Ô∏è Core category not found or empty');
        }
        
        // Add Cool Down
        if (categories['Cool Down'] && categories['Cool Down'].length > 0) {
            completePlan.push({
                id: 'cool-down-' + Date.now(),
                category: 'Cool Down',
                exercises: categories['Cool Down'].map(ex => ({...ex, completed: false}))
            });
            console.log('‚úÖ Added Cool Down');
        } else {
            console.log('‚ö†Ô∏è Cool Down category not found or empty');
        }
        
        console.log('Complete plan:', completePlan.length, 'categories');
        
        // Save to today's plan (morning by default)
        const updated = {...state.todaysPlan};
        updated.morning = completePlan;
        
        console.log('Saving to localStorage...');
        saveTodaysPlan(updated);
        
        console.log('Closing modal...');
        closeCoachPlanModal();
        
        console.log('Re-rendering...');
        render();
        
        alert('‚úÖ Coach\'s Plan created!\n\n' + 
              'Total: ' + completePlan.length + ' categories\n\n' +
              'Click "‚Üí Load Plan" to start!');
        
        console.log('‚úÖ saveCoachPlan completed');
    }
    
    function closeCoachPlanModal() {
        const modal = document.getElementById('coachPlanModal');
        if (modal) modal.remove();
    }
    
    // Initialize
    // Clean up any stray modals from previous sessions
    const strayModals = document.querySelectorAll('#importModal, #exportModal, #summaryModal, #weekPlanModal, #planModal, #coachPlanModal');
    strayModals.forEach(m => m.remove());
    
    loadSessions();
    loadTodaysPlan();
    render();
    
    console.log('‚úÖ Full-Featured Athlete Dashboard loaded!');
    console.log('Categories:', Object.keys(categories).length);
    console.log('Groups:', Object.keys(categoryGroups).length);
</script>
<script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/service-worker.js")
            .then(() => console.log("‚úÖ SW registered"))
            .catch(err => console.log("‚ùå SW failed:", err));
    }
</script>
```

</body>
</html>